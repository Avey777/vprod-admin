// Static tasks configuration.
[
  {
    "label": "v run",
    "tags": ["v-main"],
    // "command": "v wipe-cache && v -g -keepc -cg -showcc -show-c-output -no-parallel -enable-globals -d veb_livereload watch -d log_debug run main.v",
    "command": "v wipe-cache && v -d veb_livereload watch  run ./main",
    "args": ["-f", "etc/config_dev.toml"],
    // 命令的环境变量覆盖，会追加到终端设置中的环境变量
    "env": {},
    // 运行命令的工作目录，默认为当前项目根目录
    "cwd": "$ZED_WORKTREE_ROOT/backend",
    //  是否使用新终端标签页或复用现有终端来运行进程，默认为`false`
    "use_new_terminal": false,
    // 是否允许同时运行同一任务的多个实例，或者等待现有实例完成，默认为`false`
    "allow_concurrent_runs": false,
    // 命令启动后如何处理终端面板和标签页：
    // * `always` — 始终显示任务面板，并聚焦其中的对应标签页（默认）
    // * `no_focus` — 始终显示任务面板，添加任务标签页但不聚焦
    // * `never` — 不改变聚焦状态，但仍会在面板中添加/复用任务标签页
    "reveal": "always",
    // 命令完成后如何处理终端面板和标签页：
    // * `never` — 命令完成后不做任何操作（默认）
    // * `always` — 始终隐藏终端标签页，如果是面板中最后一个标签页则同时隐藏面板
    // * `on_success` — 仅在任务成功时隐藏终端标签页，否则行为类似`always`
    "hide": "never",
    // 在终端中运行任务时使用的shell
    "shell": "system",
    // 是否在生成的任务输出中显示任务摘要行，默认为`true`
    "show_summary": true
  },
  {
    "label": "v run -cc clang -g",
    "tags": ["v-main"],
    // "command": "v wipe-cache && v -g -keepc -cg -showcc -show-c-output -no-parallel -enable-globals -d veb_livereload watch -d log_debug run main.v",
    "command": "v wipe-cache && v -cc clang -g -d veb_livereload watch  run ./main",
    "args": ["-f", "etc/config_dev.toml"],
    "cwd": "$ZED_WORKTREE_ROOT/backend"
  },

  /* v 构建命令 */
  {
    "label": "v build -cc clang -g",
    "tags": ["v-main"],
    "command": "v -cc clang -g -no-parallel  -o app ./main",
    "args": [],
    "cwd": "$ZED_WORKTREE_ROOT/backend",
    "use_new_terminal": false,
    "reveal": "always"
  },
  {
    "label": "v build -cc gcc -g",
    "tags": ["v-main"],
    "command": "v -cc gcc -g -no-parallel  -o app ./main",
    "args": [],
    "cwd": "$ZED_WORKTREE_ROOT/backend",
    "use_new_terminal": false,
    "reveal": "always"
  },
  {
    "label": "v build -prod",
    "tags": ["v-main"],
    "command": "v -prod -o app ./main",
    "args": [],
    "cwd": "$ZED_WORKTREE_ROOT/backend",
    "use_new_terminal": false,
    "reveal": "always"
  },

  /* v 测试命令 */
  {
    "label": "v test",
    "tags": ["v-test"],
    "command": "v -stats -enable-globals test .",
    "args": [],
    "cwd": "$ZED_WORKTREE_ROOT/backend",
    "use_new_terminal": false,
    "reveal": "always"
  }
]
