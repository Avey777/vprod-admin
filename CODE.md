# HTTP 状态码分类及使用场景

## 📍 客户端错误 (4xx)

| 状态码 | 名称                      | 使用场景                                                                 |
|--------|---------------------------|--------------------------------------------------------------------------|
| 400    | Bad Request               | **客户端请求格式错误**：无效的 JSON/XML、语法错误、参数类型错误            |
| 401    | Unauthorized              | **未认证**：缺少身份凭证或凭证无效                                         |
| 402    | Payment Required          | **需要付款**（极少用）：保留用于支付场景                                  |
| 403    | Forbidden                 | **无权限**：认证成功但无权访问资源                                        |
| 404    | Not Found                 | **资源不存在**：请求的 URL 无效或资源已被删除                              |
| 405    | Method Not Allowed        | **HTTP 方法不支持**：如对只读接口发送 POST                                |
| 406    | Not Acceptable            | **内容协商失败**：客户端要求的格式不被支持                                |
| 408    | Request Timeout           | **请求超时**：服务器等待请求时间过长                                       |
| 409    | Conflict                  | **资源冲突**：与现有状态冲突（如重复创建资源）                             |
| 410    | Gone                      | **资源永久消失**：资源被主动移除且无新地址                                 |
| 413    | Payload Too Large         | **请求体过大**：上传文件超过服务器限制                                     |
| 415    | Unsupported Media Type    | **媒体类型不支持**：Content-Type 非法                                     |
| 422    | Unprocessable Entity      | **语义错误**：请求格式正确但内容无效（字段验证失败等）                      |
| 429    | Too Many Requests         | **请求过多**：客户端触发速率限制                                           |
| 451    | Unavailable For Legal Reasons | **法律原因不可用**：因法律要求被限制访问（如 GDPR 合规）                  |

## ⚠️ 服务端错误 (5xx)

| 状态码 | 名称                      | 使用场景                                                                 |
|--------|---------------------------|--------------------------------------------------------------------------|
| 500    | Internal Server Error     | **通用服务端错误**：未捕获异常、代码崩溃                                  |
| 501    | Not Implemented           | **功能未实现**：请求超出服务器能力                                        |
| 502    | Bad Gateway               | **网关错误**：反向代理无法从上游获取响应（如后端服务宕机）                 |
| 503    | Service Unavailable       | **服务不可用**：服务器过载或维护中                                        |
| 504    | Gateway Timeout           | **网关超时**：代理服务器等待上游响应超时                                  |
| 507    | Insufficient Storage      | **存储空间不足**（WebDAV 场景）                                          |

## ✅ 成功响应 (2xx)

| 状态码 | 名称              | 使用场景                                                                 |
|--------|-------------------|--------------------------------------------------------------------------|
| 200    | OK                | **通用成功**：GET 成功或非创建型操作                                     |
| 201    | Created           | **资源创建成功**：返回新资源的 URL                                       |
| 202    | Accepted          | **请求已接受**：异步任务已排队（如邮件发送）                             |
| 204    | No Content        | **成功无返回体**：DELETE 请求或不需要返回数据的操作                       |
| 206    | Partial Content   | **部分内容**：支持分块请求（如大文件断点续传）                            |

## 🔄 重定向 (3xx)

| 状态码 | 名称                      | 使用场景                                                                 |
|--------|---------------------------|--------------------------------------------------------------------------|
| 301    | Moved Permanently         | **永久重定向**：资源永久迁移（SEO 权重转移）                             |
| 302    | Found                     | **临时重定向**：资源临时更换位置（如登录后跳转）                          |
| 304    | Not Modified              | **资源未修改**：客户端缓存有效                                           |
| 307    | Temporary Redirect        | **临时重定向（保持方法）**：类似 302 但保留原始 HTTP 方法                 |
| 308    | Permanent Redirect        | **永久重定向（保持方法）**：类似 301 但保留原始 HTTP 方法                 |

## 🎭 特殊场景状态码

| 状态码 | 名称             | 使用场景                                       |
|--------|------------------|-----------------------------------------------|
| 418    | I'm a teapot     | **彩蛋状态码**：愚人节玩笑代码，可用于测试     |
| 444    | No Response      | **无响应**：Nginx 扩展，服务器关闭连接不返回响应 |

## 🔧 最佳实践指南

### 客户端错误优先选择
- 数据问题 → `400`/`422`
- 权限问题 → `401`/`403`
- 资源问题 → `404`/`410`
- 限流问题 → `429`

### 服务端错误处理
- 通用错误 → `500`
- 网关问题 → `502`/`504`
- 过载维护 → `503`

### RESTful API 推荐组合
```http
GET    /users     → 200 OK
POST   /users     → 201 Created
GET    /users/123 → 200 OK
PUT    /users/123 → 200 OK / 204 No Content
DELETE /users/123 → 204 No Content
POST   /login     → 200 OK (成功) / 401 Unauthorized (失败)
